## คำถามทบทวหน

1. ไฟล์ใดบ้างที่จำเป็นสำหรับโปรเจกต์ ESP-IDF ขั้นต่ำ?
โปรเจกต์ ESP-IDF ขั้นต่ำต้องมีไฟล์สำคัญคือ CMakeLists.txt ที่ root โปรเจกต์, โฟลเดอร์ main/ ซึ่งมี main.c (โค้ดหลัก) และ CMakeLists.txt ของโฟลเดอร์นั้น, และไฟล์ sdkconfig ที่ได้จาก idf.py menuconfig เพื่อเก็บค่าการตั้งค่าของโปรเจกต์ ถือเป็นชุดไฟล์ขั้นต่ำที่ ESP-IDF ต้องใช้ในการ build และ run บน ESP32
2. ความแตกต่างระหว่าง `hello_esp32.bin` และ `hello_esp32.elf` คืออะไร?
ไฟล์ .elf เป็น Executable and Linkable Format ที่มี symbol และ debug info ใช้สำหรับการดีบักและตรวจสอบ แต่ไม่ได้ถูกแฟลชลงชิปโดยตรง ขณะที่ไฟล์ .bin เป็น binary ที่ถูกแปลงและตัดข้อมูล debug ทิ้งออก เหลือเฉพาะโค้ดที่จำเป็นสำหรับรันบน ESP32 และถูกแฟลชลงชิปจริง ๆ
3. คำสั่ง `idf.py set-target` ทำอะไร?
คำสั่งนี้ใช้กำหนดเป้าหมายของชิปที่จะ build เช่น esp32, esp32c3, esp32s3 โดยจะไปแก้ไฟล์ sdkconfig ให้สอดคล้องกับ target ที่เลือก เพื่อให้โค้ดและไลบรารีที่ build มาเข้ากับรุ่นของชิปที่ใช้งานจริง หากไม่ตั้งค่าอาจทำให้ build ผิดหรือแฟลชไม่ตรงกับฮาร์ดแวร์
4. โฟลเดอร์ `build/` มีไฟล์อะไรบ้าง?
เมื่อสั่ง idf.py build ระบบจะสร้างโฟลเดอร์ build/ ขึ้นมา ในนี้จะมีไฟล์สำคัญ เช่น hello_esp32.bin (ไฟล์หลักที่จะรัน), bootloader.bin (ตัวบูตโหลดเดอร์), partition-table.bin (ตารางพาร์ทิชันบน Flash), และ hello_esp32.elf (สำหรับ debug) รวมถึงไฟล์ config, log และ intermediate files ที่ใช้ในกระบวนการคอมไพล์
5. การใช้ `vTaskDelay()` แทน `delay()` มีความสำคัญอย่างไร?
delay() เป็น busy wait ที่ทำให้ CPU ต้องวนรอเฉย ๆ ส่งผลให้เสียทรัพยากรและไม่สามารถทำงานอื่นได้ แต่ vTaskDelay() เป็นฟังก์ชันของ FreeRTOS ที่ทำให้ Task ปล่อย CPU ออกไป ให้ scheduler เลือก task อื่นมาทำงานต่อได้ ช่วยให้ระบบ multitasking ทำงานจริง ประหยัดพลังงาน และใช้ทรัพยากร CPU อย่างมีประสิทธิภาพมากกว่า